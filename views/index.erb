<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Aidan Feldman API</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/afeld/jsonpanel@v0.1.2/stylesheets/jsonpanel.min.css">
    <%= stylesheet_tag 'application' %>
    <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.4.1,npm/autolinker@3.0.5,gh/afeld/jsonpanel@v0.1.2/jsonpanel.min.js"></script>
    <script>
      $(function(){
        var $json = $('.jsonpanel')
        $json.jsonpanel({data: <%= PROFILE_STR %>});

        // turn URLs into links
        $json.find('.val.string').each(function(i, el){
          var $el = $(el);
          var linked = Autolinker.link($el.text());
          $el.html(linked);
        });

        $('.profile').remove();
      });
    </script>
    <%= erb :ga %>
  </head>
  <body>
    <div class="jsonpanel"></div>
    <ul class="meta-links">
      <li>
        <a href="https://twitter.com/aidanfeldman" class="twitter-follow-button" data-show-count="false" data-show-screen-name="true">Follow @aidanfeldman</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </li>
      <li>
        <a href="index.json">View raw</a>
        <a href="https://github.com/afeld/api.afeld.me">Fork me</a>
      </li>
    </ul>
    <div class="profile">
      <%= to_dl(PROFILE_HSH) %>
    </div>
  </body>
</html>
